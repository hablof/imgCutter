# Сервис для разрезания изображений 

Данный сервис предназначен для разрезания изображений на несколько более мелких изображений требуемого размера.

### Поддерживаемые форматы

Поддерживаемые форматы соответствуют форматам, используемым в стандартной библиотеке в пакетах `"image/jpeg"` и `"image/png"`.

## Разделение сессий

Возможность использования сервиса несколькими пользователями без пересечения рабочего пространства осуществляется за счёт механизма *cookie*.

При работе с файловой системой используются *Мьютексы*.

## Нарезка изображений 

Для осуществления нарезки файл дожен быть предварительно загружен. 
Загруженные файлы хранятся в файловой системе и удаляются при завершении работы приложения.

Изображение нарезается на куски указанного размера, начиная с левого верхнего угла.
Минимальный размер получаемых изображений **32**x**32**px.

Если исходное изображение не делится на указаные размеры без остатка, крайние куски будут иметь меньший размер. 

### UI / UX

Имеется простейший веб-интерфейс на чистом HTML

## Выходные данные
Нарезаные изображения упаковываются в zip-архив и доступны для скачивания. 
Имя каждого файла в архиве состоит из:
+ исходного имени файла
+ нижнего подчёркивания
+ порядкового номера по вертикали (начиная с единицы)
+ порядкового номера по горизонтали (начиная с единицы)

Например `Picture_03x14.jpeg`

Расширение получившихся файлов всегда `.jpeg`

## Организация кода

Код разделён на пакеты `router`, `service` и `imgprocessing`.

`router` и `service` разделены интерфейсами, `service` обращается к `imgprocessing` как к библиотеке.

`router` имеет `middleware` для логгирования входящих *http*-*запросов* и для управления *cookie*

## Docker Hub
Образ сервиса размещён на https://hub.docker.com/r/hablof/imgcutter

Docker Pull Command:
```
docker pull hablof/imgcutter
```

Рекомендуемя команда для запуска через докер:
```
docker run -d -p 8080:8080 --rm --name imgcutter hablof/imgcutter
```
